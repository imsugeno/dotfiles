#compdef kotlinc kotlinc-jvm

# Kotlin compiler (kotlinc) completion for zsh
# This completion function supports kotlinc command-line options

_kotlinc() {
  local -a arguments

  arguments=(
    # Output and classpath options
    '(-d)-d[Destination for generated class files]:directory or jar:_files'
    '(-classpath -cp)'{-classpath,-cp}'[List of directories and JAR/ZIP archives]:classpath:_files'
    '(-include-runtime)-include-runtime[Include the Kotlin runtime in the resulting JAR]'
    '(-jdk-home)-jdk-home[Include a custom JDK from the specified location]:JDK path:_directories'
    '(-no-jdk)-no-jdk[Do not automatically include the Java runtime in the classpath]'
    '(-no-stdlib)-no-stdlib[Do not automatically include the Kotlin/JVM stdlib in the classpath]'
    '(-no-reflect)-no-reflect[Do not automatically include the Kotlin reflection dependency]'
    
    # Script and expression options
    '(-expression -e)'{-expression,-e}'[Evaluate the given string as a Kotlin script]:expression'
    '(-script-templates)-script-templates[Script definition template classes]:templates'
    '(-script)-script[Evaluate the given Kotlin script (*.kts) file]'
    
    # Module and version options
    '(-module-name)-module-name[Name of the generated .kotlin_module file]:module name'
    '(-jvm-target)-jvm-target[Target version of the generated JVM bytecode]:version:(1.8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24)'
    '(-java-parameters)-java-parameters[Generate metadata for Java 1.8 reflection on method parameters]'
    '(-jvm-default)-jvm-default[Emit JVM default methods for interface declarations]:mode:(enable no-compatibility disable)'
    '(-language-version)-language-version[Provide source compatibility with the specified version]:version:(1.0 1.1 1.2 1.3 1.4 1.5 1.6 1.7 1.8 1.9 2.0 2.1 2.2)'
    '(-api-version)-api-version[Allow using declarations from only the specified version]:version:(1.0 1.1 1.2 1.3 1.4 1.5 1.6 1.7 1.8 1.9 2.0 2.1 2.2)'
    '(-kotlin-home)-kotlin-home[Path to the Kotlin compiler home directory]:path:_directories'
    
    # Compiler mode options
    '(-progressive)-progressive[Enable progressive compiler mode]'
    '(-opt-in)-opt-in[Enable API usages that require opt-in]:fully qualified name'
    '(-P)-P[Pass an option to a plugin]:plugin option'
    
    # Help and info options
    '(- *)'{-help,-h}'[Print a synopsis of standard options]'
    '(- *)-X[Print a synopsis of advanced options]'
    '(- *)-version[Display the compiler version]'
    
    # Logging and warning options
    '(-verbose)-verbose[Enable verbose logging output]'
    '(-nowarn)-nowarn[Do not generate any warnings]'
    '(-Werror)-Werror[Report an error if there are any warnings]'
    '(-Wextra)-Wextra[Enable extra checkers for K2]'
    
    # JVM options
    '(-J)-J[Pass an option directly to JVM]:JVM option'
    
    # Advanced options (commonly used)
    '-Xallow-unstable-dependencies[Do not report errors on classes in dependencies compiled by unstable Kotlin version]'
    '-Xabi-stability[Mark generated class files stability]:stability:(stable unstable)'
    '-Xbackend-threads[Run codegen phase in N parallel threads]:threads:(0 1 2 4 8)'
    '-Xmodule-path[Paths to Java 9+ modules]:path:_files'
    '-Xadd-modules[Root modules to resolve]:modules'
    '-Xno-call-assertions[Do not generate not-null assertions for arguments of platform types]'
    '-Xno-receiver-assertions[Do not generate not-null assertions for extension receiver arguments]'
    '-Xno-param-assertions[Do not generate not-null assertions on parameters accessible from Java]'
    '-Xno-optimize[Disable optimizations]'
    '-Xassertions[kotlin.assert call behavior]:behavior:(always-enable always-disable jvm legacy)'
    '-Xbuild-file[Path to the .xml build file to compile]:build file:_files -g "*.xml"'
    '-Xuse-javac[Use javac for Java source and class file analysis]'
    '-Xcompile-java[Reuse javac analysis and compile Java source files]'
    '-Xjavac-arguments[Java compiler arguments]:arguments'
    '-Xjava-source-roots[Paths to directories with Java source files]:path:_directories'
    '-Xjsr305[Specify the behavior of JSR-305 nullability annotations]:mode'
    '-Xnullability-annotations[Specify the behavior for specific Java nullability annotations]:annotation'
    '-Xjspecify-annotations[Specify the behavior of jspecify annotations]:behavior:(ignore strict warn)'
    '-Xdefault-script-extension[Compile expressions as scripts with given extension]:extension'
    '-Xdisable-standard-script[Disable standard Kotlin scripting support]'
    '-Xfriend-paths[Paths to output directories for friend modules]:path:_directories'
    '-Xallow-no-source-files[Allow the set of source files to be empty]'
    '-Xemit-jvm-type-annotations[Emit JVM type annotations in bytecode]'
    '-Xstring-concat[Select the code generation scheme for string concatenation]:scheme:(indy-with-constants indy inline)'
    '-Xjdk-release[Compile against the specified JDK API version]:version:(1.8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24)'
    '-Xsam-conversions[Select the code generation scheme for SAM conversions]:scheme:(class indy)'
    '-Xlambdas[Select the code generation scheme for lambdas]:scheme:(class indy)'
    '-Xindy-allow-annotated-lambdas[Allow using invokedynamic for lambda expressions with annotations]'
    '-Xklib[Paths to cross-platform libraries in .klib format]:path:_files -g "*.klib"'
    '-Xno-reset-jar-timestamps[Do not reset jar entry timestamps to a fixed date]'
    
    # Argument file
    '*:Kotlin source file:_files -g "*.kt *.kts"'
  )

  _arguments -s -S $arguments
}

_kotlinc "$@"

